<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/WEB-INF/template.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html">

    <ui:define name="title"><h:outputText value="#{message['Menu.ChargebackOrderInquiryList']}"></h:outputText> </ui:define>
     <ui:define name="content">
        <f:view id="searchCriteriaView">
            <h:form id="formTbl">
               <p:growl id="growl"></p:growl>
               <p:fieldset legend="#{message['Global.ToFind']}">
                   <p:panelGrid>
                       <p:row>
                            <p:column>
                                <h:outputText value="#{message['Inquiry.OrderNo']}"></h:outputText>
                            </p:column>
                            <p:column> 
                                <p:inputText id="orderno" value="#{inquirySearch.orderNo}"></p:inputText>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{message['Inquiry.FraudController']}"></h:outputText>
                            </p:column>
                            <p:column> 
                                <p:selectOneMenu id="edtFraudController" value="#{inquirySearch.fraudController}" 
                                         converter="omnifaces.SelectItemsConverter" filter="true" filterMatchMode="startsWith">
                                    <f:selectItem noSelectionOption="true" itemLabel="SeÃ§iniz"/>
                                    <f:selectItems value="#{inquirySearch.merchantFraudControllers}" 
                                                   var="fru" itemLabel="#{fru.firstname} #{fru.lastname}" itemValue="#{fru}"></f:selectItems>
                                </p:selectOneMenu>                       
                            </p:column>
                       </p:row>          
                       <p:row>
                            <p:column>
                                <h:outputText value="#{message['Inquiry.MemberName']}"></h:outputText>
                            </p:column>
                            <p:column> 
                                <p:inputText id="membername" value="#{inquirySearch.memberName}"></p:inputText>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{message['Inquiry.MemberSurname']}"></h:outputText>
                            </p:column>
                            <p:column> 
                                <p:inputText id="membersurname" value="#{inquirySearch.memberSurname}"></p:inputText>                     
                            </p:column>
                       </p:row>          
                        <p:row>
                            <p:column>
                                <h:outputText value="#{message['Inquiry.MemberUsername']}"></h:outputText>
                            </p:column>
                            <p:column colspan="3"> 
                                <p:inputText id="memberusername" value="#{inquirySearch.memberUsername}"></p:inputText>
                            </p:column>
                       </p:row>        
                       <p:row>
                           <p:column>
                               <h:outputText value="#{message['Inquiry.OrderDateRange']}"></h:outputText>
                           </p:column>
                           <p:column>
                               <p:calendar id="requestBegin" pattern="dd/MM/yyyy" 
                                            navigator="true" mask="true" 
                                            showOn="button" size="10" 
                                            value="#{inquirySearch.orderBeginDate}" >
                                </p:calendar>
                               <h:outputText value="-"></h:outputText>
                               <p:calendar id="requestEnd" pattern="dd/MM/yyyy" 
                                            navigator="true" mask="true" 
                                            showOn="button" size="10" 
                                            value="#{inquirySearch.orderEndDate}" >
                                </p:calendar>
                           </p:column>
                         
                       </p:row>
                       
                       <p:row>
                           <p:column colspan="4">
                               <p:commandButton value="#{message['Global.Search']}" update="tblList" actionListener="#{inquirySearch.searchInquiry()}"
                                                ></p:commandButton>
                           </p:column>
                       </p:row>
                   </p:panelGrid>
               </p:fieldset>
               <p:outputPanel id="tblList">
               <p:dataTable value="#{inquirySearch.inquiries}" var="item" 
                            rows="10"
                            paginator="true"
                            reflow="true"
                            resizableColumns="true"
                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                            rowsPerPageTemplate="5,10,15"
                            >
                   <f:facet name="header">#{message['Menu.ChargebackOrderInquiryList']}</f:facet>
                   <p:column  class="fontSize12" headerText="#{message['Inquiry.OrderNo']}" sortBy="#{item.orderInfo.orderNo}">
                       <h:outputLink value="#{request.contextPath}/app/orderinquiry.xhtml?id=#{item.id}" style="color:#0088cc">#{item.orderInfo.orderNo}</h:outputLink>
                   </p:column>
                   <p:column  class="fontSize12" 
                              headerText="#{message['Global.Customer']}" >
                       <h:outputText value="#{item.orderInfo.memberName} #{item.orderInfo.memberSurname}" title="#{item.orderInfo.memberUsername }"></h:outputText>
                   </p:column>
                   <p:column  class="fontSize12" headerText="#{message['Inquiry.FraudController']}" sortBy="#{item.paymentInfo.fraudController.nameSurname}">
                       <h:outputText value="#{item.paymentInfo.fraudController.nameSurname}"></h:outputText>
                   </p:column>
                   
                   <p:column  class="fontSize12" headerText="#{message['Inquiry.OrderDate']}" sortBy="#{item.orderInfo.orderDate}">
                       <h:outputText value="#{helper.date2String(item.orderInfo.orderDate )}">
                       </h:outputText>
                   </p:column>
                   
               </p:dataTable>
               </p:outputPanel>
               <p:commandButton value="#{message['Global.NewRecord']}" action="/app/orderinquiry.xhtml?faces-redirect=true"></p:commandButton>               
                
            </h:form>             
        </f:view>
    </ui:define>

</ui:composition>