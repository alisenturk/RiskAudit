<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns="http://www.w3.org/1999/xhtml">

    <p:panelGrid id="chargebackPanel" style="border:hidden !important;vertical-align: text-top !important;width:98%;" >
        <p:row style="vertical-align:text-top !important; ">
            <p:column style="border: hidden !important;">
                <p:fieldset legend="#{message['Inquiry.ChargebackDetails']}" toggleable="true" toggleSpeed="500">
                    <p:panelGrid id="chargebackDetail" >
                        <p:row>
                            <p:column><h:outputLabel value="#{message['Inquiry.Chargeback.ProcessType']}"></h:outputLabel> </p:column>
                            <p:column >
                                <p:selectOneRadio id="cbProcessType" value="#{chargebackAction.instance.processType}" 
                                                  required="true" 
                                                  class="selectonenoborder">
                                    <f:selectItems value="#{enums.chargebackProcessTypeSelect}"></f:selectItems>
                                </p:selectOneRadio>
                            </p:column>
                            <p:column><p:message for="cbProcessType"></p:message></p:column>
                        </p:row>
                        <p:row>
                            <p:column><h:outputLabel value="#{message['Inquiry.Chargeback.ProcessDate']}"></h:outputLabel> </p:column>
                            <p:column>
                                 <p:calendar id="cbProcessDate" 
                                            pattern="dd/MM/yyyy" 
                                            navigator="true" mask="true" 
                                            showOn="button" size="10" 
                                            value="#{chargebackAction.instance.processDate}" 
                                            required="true"></p:calendar>
                            </p:column>
                            <p:column><p:message for="cbProcessDate"></p:message></p:column>
                        </p:row>
                        <p:row>
                            <p:column><h:outputLabel value="#{message['Inquiry.Chargeback.Bank']}"></h:outputLabel> </p:column>
                            <p:column>
                                <p:selectOneMenu id="cbBank"
                                                 value="#{chargebackAction.instance.bank}"
                                                 converter="omnifaces.SelectItemsConverter"
                                                 required="true">
                                    <f:selectItem noSelectionOption="true" itemLabel="Seçiniz"/>
                                    <f:selectItems value="#{chargebackAction.banks}" 
                                                   var="bank" itemLabel="#{bank.bankName}" itemValue="#{bank}"></f:selectItems>
                                </p:selectOneMenu>
                            </p:column>
                            <p:column><p:message for="cbBank"></p:message></p:column>
                        </p:row>
                        <p:row>
                            <p:column><h:outputLabel value="#{message['Inquiry.Chargeback.CreditCard']}"></h:outputLabel> </p:column>
                            <p:column>
                                <p:inputMask id="cbCreditCard" value="#{chargebackAction.instance.creditCardNo}" mask="9999-99XX-XXXX-9999"/>
                            </p:column>
                            <p:column><p:message for="cbCreditCard"></p:message></p:column>
                        </p:row>
                        <p:row>
                            <p:column><h:outputLabel value="#{message['Inquiry.Chargeback.ProviderBank']}"></h:outputLabel> </p:column>
                            <p:column>
                                <p:selectOneMenu id="cbProviderBank"
                                                 value="#{chargebackAction.instance.creditCardProvider}"
                                                 converter="omnifaces.SelectItemsConverter"
                                                 required="true">
                                    <f:selectItem noSelectionOption="true" itemLabel="Seçiniz"/>
                                    <f:selectItems value="#{chargebackAction.banks}" 
                                                   var="bank" itemLabel="#{bank.bankName}" itemValue="#{bank}"></f:selectItems>
                                </p:selectOneMenu>
                            </p:column>
                            <p:column><p:message for="cbProviderBank"></p:message></p:column>
                        </p:row>
                        <p:row>
                            <p:column><h:outputLabel value="#{message['Inquiry.Chargeback.IBAN']}"></h:outputLabel> </p:column>
                            <p:column>
                                <p:inputMask id="cbIBAN" value="#{chargebackAction.instance.iban}" mask="aa99 9999 9999 9999 9999 9999 99" size="40"/>
                            </p:column>
                            <p:column><p:message for="cbIBAN"></p:message></p:column>
                        </p:row>
                        <p:row>
                            <p:column><h:outputLabel value="#{message['Inquiry.Chargeback.ChargebackCode']}"></h:outputLabel> </p:column>
                            <p:column>
                                <p:selectOneMenu id="cbCode"
                                                 value="#{chargebackAction.instance.chargebackCode}"
                                                 converter="omnifaces.SelectItemsConverter"
                                                 required="false">
                                    <f:selectItem noSelectionOption="true" itemLabel="Seçiniz"/>
                                    <f:selectItems value="#{chargebackAction.chargebackCodes}" 
                                                   var="cbcode" itemLabel="#{cbcode.title}(#{cbcode.chargebackCode})" 
                                                   itemValue="#{cbcode}"></f:selectItems>
                                </p:selectOneMenu>
                            </p:column>
                            <p:column><p:message for="cbCode"></p:message></p:column>
                        </p:row>
                        <p:row id="cbProcessDescr" rendered="#{chargebackAction.instance.chargebackCode ne null}">
                            <p:column><h:outputLabel value="#{message['Inquiry.Chargeback.ChargebackCode.ProcessDescription']}"></h:outputLabel> </p:column>
                            <p:column>
                                <h:outputFormat value="#{chargebackAction.instance.chargebackCode.processDescription}"></h:outputFormat>
                            </p:column>
                            <p:column></p:column>
                        </p:row>
                        <p:row>
                            <p:column><h:outputLabel value="#{message['Inquiry.Chargeback.Reason']}"></h:outputLabel> </p:column>
                            <p:column>
                                <p:selectOneMenu id="cbReason"
                                                 value="#{chargebackAction.instance.charebackReason}"
                                                 converter="omnifaces.SelectItemsConverter"
                                                 required="false">
                                    <f:selectItem noSelectionOption="true" itemLabel="Seçiniz"/>
                                    <f:selectItems value="#{chargebackAction.chargebackReasons}" 
                                                   var="reason" itemLabel="#{reason.reasonDescription}(#{reason.reasonCode})" itemValue="#{reason}"></f:selectItems>
                                </p:selectOneMenu>
                            </p:column>
                            <p:column><p:message for="cbReason"></p:message></p:column>
                        </p:row>
                        <p:row>
                            <p:column><h:outputLabel value="#{message['Inquiry.Chargeback.DeclarationDate']}"></h:outputLabel> </p:column>
                            <p:column>
                                 <p:calendar id="cbDeclarationDate" 
                                            pattern="dd/MM/yyyy" 
                                            navigator="true" mask="true" 
                                            showOn="button" size="10" 
                                            value="#{chargebackAction.instance.declarationDate}" 
                                            required="true"></p:calendar>
                            </p:column>
                            <p:column><p:message for="cbDeclarationDate"></p:message></p:column>
                        </p:row>
                        <p:row>
                            <p:column><h:outputLabel value="#{message['Inquiry.Chargeback.Amount']}"></h:outputLabel> </p:column>
                            <p:column style="vertical-align: top !important;">
                                <p:panelGrid columns="2" style="border-style: hidden !important;" >
                                    <p:inputText id="cbAmount"
                                                 value="#{chargebackAction.instance.total}"
                                                required="true" size="18" maxlength="16"/>
                                    <p:selectOneMenu id="cbCurrency"
                                                     value="#{chargebackAction.instance.currency}"
                                                 required="true">
                                    <f:selectItems value="#{enums.currencySelect}"></f:selectItems>
                                </p:selectOneMenu>
                                </p:panelGrid>
 
                            </p:column>
                            <p:column><p:message for="cbAmount"></p:message><p:message for="cbCurrency"></p:message></p:column>
                        </p:row>
                        <p:row>
                            <p:column><h:outputLabel value="#{message['Inquiry.Chargeback.Comment']}"></h:outputLabel> </p:column>
                            <p:column>
                                <p:inputTextarea id="cbComment" rows="10" cols="50" value="#{chargebackAction.instance.comment}"></p:inputTextarea> 
                            </p:column>
                            <p:column><p:message for="cbComment"></p:message></p:column>
                        </p:row>
                        <p:row>
                            <p:column colspan="3">
                               <p:commandButton value="#{message['Global.Save']}" 
                                                actionListener="#{chargebackAction.save()}"
                                                update=":inqyTab:formChargebackEdit:chargebackGrowl,
                                                        :inqyTab:formChargebackEdit:chargebackPanel,
                                                        :inqyTab:formChargebackEdit:chargbackTable">
                               </p:commandButton>

                               <p:commandButton value="#{message['Global.NewRecord']}" action="#{chargebackAction.newRecord()}" 
                                                 class="GreenButton"
                                                 update=":inqyTab:formChargebackEdit:chargebackGrowl,:inqyTab:formChargebackEdit:chargebackPanel"
                                                rendered="#{chargebackAction.instance.managed}"
                                                >
                              </p:commandButton>

                               <p:commandButton value="#{message['Global.BackToList']}" action="orderInquirySearch.xhtml?faces-redirect=true"
                                                class="RedButton" process="@this"
                                                rendered="#{chargebackAction.instance.managed}"
                                                >
                              </p:commandButton>

                            </p:column>
                        </p:row>
                    </p:panelGrid>
                </p:fieldset>                
            </p:column>
            
        </p:row>
    </p:panelGrid>    
    <br/>
    
    <p:dataTable id="chargbackTable" value="#{chargebackAction.orderChargebacks}" var="chrgback" reflow="true"  scrollable="true" paginator="true"  >
            <p:column style="width:5%" headerText="Id">
                <h:outputText value="#{chrgback.id}"/>
            </p:column>
            <p:column headerText="#{message['Inquiry.Chargeback.ProcessType']}">
                <h:outputText value="#{chrgback.processType.label}"></h:outputText>
            </p:column>
            <p:column headerText="#{message['Inquiry.Chargeback.ProcessDate']}">
                <h:outputText value="#{helper.date2String(chrgback.processDate)}"/>
            </p:column>     
            <p:column headerText="#{message['Inquiry.Chargeback.Bank']}">
                <h:outputText value="#{chrgback.bank.bankName}"/>
            </p:column>     
            <p:column headerText="#{message['Inquiry.Chargeback.CreditCard']}">
                <h:outputText value="#{chrgback.creditCardNo}"/>
            </p:column>
            <p:column headerText="#{message['Inquiry.Chargeback.IBAN']}">
                <h:outputText value="#{chrgback.iban}"/>
            </p:column>            
            <p:column headerText="#{message['Inquiry.Chargeback.ChargebackCode']}">
                <h:outputText value="#{chrgback.chargebackCode.title}"/>
            </p:column>            
            <p:column headerText="#{message['Inquiry.Chargeback.Reason']}">
                <h:outputText value="#{chrgback.charebackReason.reasonDescription}"/>
            </p:column> 
            <p:column headerText="#{message['Inquiry.Chargeback.DeclarationDate']}">
                <h:outputText value="#{helper.date2String(chrgback.declarationDate)}"/>
            </p:column> 
            <p:column headerText="#{message['Inquiry.Chargeback.Amount']}">
                <h:outputText value="#{chrgback.total} #{chrgback.currency}"/>
            </p:column> 
            <p:column headerText=" ">
                <p:commandButton update=":inqyTab:formChargebackEdit:chargebackDetail"
                                icon="ui-icon-search"
                                process="@this"
                                >
                    <f:setPropertyActionListener value="#{chrgback}" target="#{chargebackAction.instance}"/>
               </p:commandButton>
            </p:column>
        </p:dataTable>

  
    <style>
         .ui-selectonemenu .ui-selectonemenu-label {
            display: block;
            border: none;
            white-space: nowrap;
            overflow: hidden;
            font-weight: normal;
            width: 94% !important;
            text-align: left;
          }
          .selectonenoborder tbody tr td {
                border: 0px solid #c0c5c7 !important;
                transition: all 0.5s ease 0s;
            }
    </style>
</ui:composition>